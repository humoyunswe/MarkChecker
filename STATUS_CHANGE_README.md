# –°–º–µ–Ω–∞ –°—Ç–∞—Ç—É—Å –ö–æ–¥ - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## –û–ø–∏—Å–∞–Ω–∏–µ
–ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ CQL (Cassandra Query Language) –∑–∞–ø—Ä–æ—Å–æ–≤ UPDATE –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–¥–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Cassandra.

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É:
```
http://localhost:8000/status-change/
```

### 2. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ:
- **–°–ø–∏—Å–æ–∫ ID** - JSON –º–∞—Å—Å–∏–≤ —Å ID –∫–æ–¥–æ–≤:
```json
["00046079560700001564", "00046079560700001687", "00046079560700001816"]
```

#### –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (—Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
- **Type** - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `2`
- **Product Group** - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `pharma`

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è CQL

–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å CQL", —Å–∏—Å—Ç–µ–º–∞:
1. –ò–∑–≤–ª–µ–∫–∞–µ—Ç GTIN –∏–∑ –∫–∞–∂–¥–æ–≥–æ ID (—Å–∏–º–≤–æ–ª—ã —Å –ø–æ–∑–∏—Ü–∏–∏ 2 –ø–æ 16, –¥–ª–∏–Ω–∞ 14 —Å–∏–º–≤–æ–ª–æ–≤)
2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç UPDATE –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ ID

### –ü—Ä–∏–º–µ—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ CQL:
```sql
UPDATE docflow_go.marks_go SET in_circulation = false WHERE id = '00046079560700001564' AND "Type" = 2 AND gtin = '0460795607000015' AND prod_group = 'pharma';
UPDATE docflow_go.marks_go SET in_circulation = false WHERE id = '00046079560700001687' AND "Type" = 2 AND gtin = '0460795607000016' AND prod_group = 'pharma';
UPDATE docflow_go.marks_go SET in_circulation = false WHERE id = '00046079560700001816' AND "Type" = 2 AND gtin = '0460795607000018' AND prod_group = 'pharma';
```

### 4. –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–≤–µ –æ–ø—Ü–∏–∏:
- **üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å CQL** - —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å CQL –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- **üíæ –°–∫–∞—á–∞—Ç—å CQL —Ñ–∞–π–ª** - —Å–∫–∞—á–∞—Ç—å CQL –∫–∞–∫ —Ñ–∞–π–ª (—Ñ–æ—Ä–º–∞—Ç: `status_change_YYYY-MM-DD.cql`)

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **GTIN –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è** –∏–∑ ID –∫–æ–¥–∞ (—Å–∏–º–≤–æ–ª—ã 2-16)
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –∫–æ–¥—ã –∫–æ—Ä–æ—á–µ 16 —Å–∏–º–≤–æ–ª–æ–≤ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è
3. **–ò—Å—Ç–æ—Ä–∏—è**: –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```json
ID —Å–ø–∏—Å–æ–∫: ["00046079560700001564", "00046079560700001687"]
Type: 2 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
Product Group: pharma (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

### –ü—Ä–∏–º–µ—Ä 2: –° –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```json
ID —Å–ø–∏—Å–æ–∫: ["00046079560700001564", "00046079560700001687"]
Type: 1
Product Group: tobacco
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
```sql
UPDATE docflow_go.marks_go SET in_circulation = false WHERE id = '00046079560700001564' AND "Type" = 1 AND gtin = '0460795607000015' AND prod_group = 'tobacco';
```
